---
layout: default
navsection: installguide
title: Planning and prerequisites
...
{% comment %}
Copyright (C) The Arvados Authors. All rights reserved.

SPDX-License-Identifier: CC-BY-SA-3.0
{% endcomment %}

Before attempting installation, you should begin by reviewing supported platforms, choosing backends for identity, storage, and scheduling, and decide how you will distribute Arvados services onto machines.  You should also choose an Arvados Cluster ID, choose your hostnames, and aquire TLS certificates.  It may be helpful to make notes as you go along.

The Arvados storage subsystem is called "keep".  The compute subsystem is called "crunch".

# "Supported GNU/Linux distributions":#supportedlinux
# "Identity provider":#identity
# "Storage backend (Keep)":#storage
# "Container compute scheduler (Crunch)":#scheduler
# "Hardware or virtual machines":#machines
# "Arvados Cluster ID":#clusterid
# "DNS and TLS":#dnstls

h2(#supportedlinux). Supported GNU/Linux distributions

table(table table-bordered table-condensed).
|_. Distribution|_. State|_. Last supported version|
|CentOS 7|Supported|Latest|
|Debian 10 ("buster")|Supported|Latest|
|Debian 9 ("stretch")|Supported|Latest|
|Ubuntu 16.04 ("xenial")|Supported|Latest|
|Ubuntu 18.04 ("bionic")|Supported|Latest|
|Ubuntu 14.04 ("trusty")|EOL|5f943cd451acfbdcddd84e791738c3aa5926bfed (2019-07-10)|
|Debian 8 ("jessie")|EOL|5f943cd451acfbdcddd84e791738c3aa5926bfed (2019-07-10)|
|Ubuntu 12.04 ("precise")|EOL|8ed7b6dd5d4df93a3f37096afe6d6f81c2a7ef6e (2017-05-03)|
|Debian 7 ("wheezy")|EOL|997479d1408139e96ecdb42a60b4f727f814f6c9 (2016-12-28)|
|CentOS 6 |EOL|997479d1408139e96ecdb42a60b4f727f814f6c9 (2016-12-28)|

Arvados packages are published for current Debian releases (until the EOL date), current Ubuntu LTS releases (until the end of standard support), and the latest version of CentOS.

h2(#identity). Identity provider

Choose which backend you will use to authenticate users.

* Google login to authenticate users with a Google account.  Note: if you only use Google, you can use @arvados-controller@ support for Google login, and do not need to install the Arvados Single Sign-On server (SSO).
* LDAP login to authenticate users using the LDAP protocol, supported by many services such as OpenLDAP and Active Directory.  Supports username/password authentication.
* Standalone SSO server user database.  Supports username/password authentication.  Supports new user sign-up.

h2(#storage). Storage backend

Choose which backend you will use for storing and retrieving content-addressed Keep blocks.

* File systems storage, such as ext4 or xfs, or network file systems such as GPFS or Lustre
* Amazon S3, or other object storage that supports the S3 API including Google Cloud Storage and Ceph.
* Azure blob storage

You should also determine the desired replication factor for your data.  A replication factor of 1 means only a single copy of a given data block is kept.  With a conventional file system backend and a replication factor of 1, a hard drive failure is likely to lose data.  For this reason the default replication factor is 2 (two copies are kept).

A backend may have its own replication factor (such as durability guarantees of cloud buckets) and Arvados will take this into account when writing a new data block.

h2(#scheduler). Container compute scheduler

Choose which backend you will use to schedule computation.

* On AWS EC2 and Azure, you probably want to use @crunch-dispatch-cloud@ to manage the full lifecycle of cloud compute nodes: starting up nodes sized to the container request, executing containers on those nodes, and shutting nodes down when no longer needed.
* For on-premise HPC clusters using "slurm":https://slurm.schedmd.com/ use @crunch-dispatch-slurm@ to execute containers with slurm job submissions.
* For single node demos, use @crunch-dispatch-local@ to execute containers directly.

h2(#machines). Hardware (or virtual machines)

For a production installation, here is a suggested configuration:

<div class="offset1">
table(table table-bordered table-condensed).
|_. Function|_. Number of nodes|_. Recommended specs|
|Postgres database, Arvados API server, Arvados controller, Git, Websockets|1|16+ GiB RAM, 4+ cores, fast disk for database|
|Single Sign-On (SSO) server ^1^|1|2 GiB RAM|
|Workbench, Keepproxy, Keep-web, Keep-balance|1|8 GiB RAM, 2+ cores|
|Keepstore servers ^2^|2+|4 GiB RAM|
|Compute scheduler|1|2 GiB RAM|
|Compute worker nodes ^2^|2+ |Depends on workload|
|User shell nodes ^3^|0+|Depends on workload|
</div>

^1^ May be omitted when using Google login support in @arvados-controller@
^2^ Should be scaled up as needed
^3^ Refers to shell nodes managed by Arvados, that provide ssh access for users to interact with Arvados at the command line.  Optional.

{% include 'notebox_begin' %}
For a small demo installation, it is possible to run all the Arvados services on a single node.  Special considerations for single-node installs will be noted in boxes like this.
{% include 'notebox_end' %}

h2(#clusterid). Arvados Cluster ID

Each Arvados installation should have a cluster identifier, which is a unique 5-character lowercase alphanumeric string.   Here is one way to make a random 5-character string:

<notextile>
<pre><code>~$ <span class="userinput">tr -dc 0-9a-z &lt;/dev/urandom | head -c5; echo</span>
</code></pre>
</notextile>

You may also use a different method to pick the cluster identifier. The cluster identifier will be part of the hostname of the services in your Arvados cluster. The rest of this documentation will refer to it as your @ClusterID@.

h2(#dnstls). DNS entries and TLS certificates

The following services are normally public-facing and require DNS entries and corresponding TLS certificates.  Get certificates from your preferred TLS certificate provider.  We recommend using "Let's Encrypt":https://letsencrypt.org/ .  You can run several services on same node, but each distinct hostname requires its own TLS certificate.  A later part of this guide will describe how to set up Nginx virtual hosts.

<div class="offset1">
table(table table-bordered table-condensed).
|_. Function|_. Hostname|
|Arvados API|@ClusterID@.your.domain|
|Arvados Git server|git.@ClusterID@.your.domain|
|Arvados Websockets endpoint|ws.@ClusterID@.your.domain|
|Arvados SSO Server|auth.your.domain|
|Arvados Workbench|workbench.@ClusterID@.your.domain|
|Arvados Workbench 2|workbench2.@ClusterID@.your.domain|
|Arvados Keepproxy server|keep.@ClusterID@.your.domain|
|Arvados Keep-web server|download.@ClusterID@.your.domain
_and_
*.collections.@ClusterID@.your.domain or
*<notextile>--</notextile>collections.@ClusterID@.your.domain or
collections.@ClusterID@.your.domain (see the "keep-web install docs":install-keep-web.html)|
</div>

{% include 'notebox_begin' %}
It is also possible to create your own certificate authority, issue server certificates, and install a custom root certificate in the browser.  This is out of scope for this guide.
{% include 'notebox_end' %}
